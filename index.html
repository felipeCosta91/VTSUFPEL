<!DOCTYPE html>
<html>

<head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript">
        </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js" type="text/javascript">
    </script>

    </script>
    <script src="js/mqtt.js"></script>
    <script src="js/rota.js"></script>
   <!-- fontes  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
   <!--materialize-->
    <link type="text/css" rel="stylesheet" href="materialize/css/materialize.min.css" media="screen,projection" />
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="style/style.css">
</head>
    <body>
  <!-- navbar -->
    <nav class="#546e7a blue-grey darken-1">
  <a href="index.html">      <h5 class="brand-logo">IoT Ufpel</h5></a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="horarios.html">Horarios</a></li>
                <li><a href="#">Monitoramento</a></li>
                <li><a href="#">Sobre Nós</a></li>

            </ul>
    </nav>
<!--  modal onibus-->

  
    <div id="map"></div>



    <script>
        MQTTconnect();
        //função de callback necessária pois o servidor aborta conexao
    </script>
    <script>
        //latitude e longitude do anglo caso o ônibus esteja parado
        window.lat = -31.780538;
        window.lng = -52.323866;

        var map;
        //icones de paradas
        var icone = '00.png';
        var parada_anglo = '01.png';
        var parada_cotada = '02.png';
        var parada_ich = '03.png';
        var parada_campus = '04.png';
        var parada_cabeluda = '05.png';
        var parada_salis = '06.png';
        var parada_ALM = '07.png';
        var parada = [];

        function initMap() {

            var infowindow = new google.maps.InfoWindow();




            map = new google.maps.Map(document.getElementById('map'), {
                //centra no campus anglo com um zoom de 19 
                center: {
                    lat: -31.7802207,
                    lng: -52.3257864
                },
                zoom: 16,
                mapTypeId: google.maps.MapTypeId.ROADMAP //tipo de mapa
            });
            mark = new google.maps.Marker({
                position: {
                    lat: lat,
                    lng: lng
                },
                map: map,
                icon: icone
            });

            //efetua a marcação da roda
            var flightPath = new google.maps.Polyline({
                path: flightPlanCoordinates,
                geodesic: true,
                strokeColor: '#FF0000',
                strokeOpacity: 1.0,
                strokeWeight: 6
            });

            flightPath.setMap(map);
            //paradas de ônibus
            var destino = '-31.780528,-52.323864';

            parada[0] = new google.maps.Marker({
                position: {
                    lat: -31.780528,
                    lng: -52.323864
                },
                map: map,
                icon: parada_anglo
            });
            //cotada -31.781066,-52.335146
            parada[1] = new google.maps.Marker({
                position: {
                    lat: -31.781066,
                    lng: -52.335146
                },
                map: map,
                icon: parada_cotada
            });
            //ich -31.779783,-52.339528
            parada[2] = new google.maps.Marker({
                position: {
                    lat: -31.779783,
                    lng: -52.339528
                },
                map: map,
                icon: parada_ich
            });            
            // CAMPUSII  lat:-31.775980, lng:-52.339338
            parada[3] = new google.maps.Marker({
                position: {
                    lat: -31.775980,
                    lng: -52.339338
                },
                map: map,
                icon: parada_campus
            });
            //SALIS -31.772036,-52.340056
            parada[4] = new google.maps.Marker({
                position: {
                    lat: -31.772036,
                    lng: -52.340056
                },
                map: map,
                icon: parada_salis
            });
            //SALIS -31.772036,-52.340056
            parada[5] = new google.maps.Marker({
                position: {
                    lat: -31.775980,
                    lng: -52.339338
                },
                map: map,
                icon: parada_ALM
            });
            // CABELUDA-31.772324, lng:-52.342917
            parada[6] = new google.maps.Marker({
                position: {
                    lat: -31.772324,
                    lng: -52.342917
                },
                map: map,
                icon: parada_cabeluda
            });
        }

    </script>
    <!-- modal tempos -->
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDrUm597y3MHxZ6lpLzE_DZP8fSl_Vdgd0&callback=initMap" async defer></script>
    <script type="text/javascript" src="materialize/js/materialize.min.js"></script>
    <script src="js/modal.js"></script>
    <script src="js/tempo.js"></script>
</body>
<script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>

</html>